<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Set Slack Status</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div id="main-container" class="container">
    <!-- Loader -->
    <div id="loader">
      <p>Loading configuration...</p>
    </div>

    <!-- App Setup Instructions -->
    <div id="setup-container" class="hidden">
      <h1>Initial Setup</h1>
      <h2>Let's configure your Slack App credentials.</h2>
      <div class="setup-instructions">
        <ol>
          <li>Open the <a href="https://api.slack.com/apps" target="_blank">Slack App creation page</a> and select
            <strong>"Create an App"</strong> -> <strong>"From scratch"</strong>.</li>
          <li>Type <code>Music Status Slack Mac</code> for the App Name and choose your workspace.</li>
          <li>On the "Basic Information" page, find the <strong>App Credentials</strong> section. Copy the
            <strong>Client ID</strong> and <strong>Client Secret</strong> into the fields below.</li>
          <li>In the left sidebar, go to <strong>"OAuth & Permissions"</strong>. Under <strong>Redirect URLs</strong>,
            add this exact URL: <code>https://localhost:5001/oauth/redirect</code>. Then click <strong>Save
              URLs</strong>.</li>
          <li>Still on the <strong>"OAuth & Permissions"</strong> page, scroll down to the <strong>"Scopes"</strong>
            section. Under <strong>"User Token Scopes"</strong>, click <strong>"Add an OAuth Scope"</strong> and add
            <code>users.profile:write</code>.</li>
          <li>You're done with the Slack website! Come back here, paste your credentials, and click save. You can close
            the Slack website now.</li>
        </ol>
      </div>
      <form id="setupForm">
        <div class="form-group">
          <label for="clientId">Client ID</label>
          <input type="text" id="clientId" name="clientId" required>
        </div>
        <div class="form-group">
          <label for="clientSecret">Client Secret</label>
          <input type="password" id="clientSecret" name="clientSecret" required>
        </div>
        <button type="submit">Save Credentials & Restart</button>
      </form>
      <div id="setup-response" class="response"></div>
    </div>

    <!-- Authentication Step -->
    <div id="auth-container" class="container-sm hidden">
      <h1>Connect to Slack</h1>
      <h2>Your credentials are saved. Now, connect your account.</h2>
      <a href="#" id="slack-auth-button" class="button button-slack">Add to Slack</a>
    </div>

    <!-- Main Status Setter -->
    <div id="status-container" class="container-sm hidden">
      <h1>Set Your Slack Status</h1>
      <h2>Enter a status and it will appear in Slack.</h2>
      <form id="statusForm">
        <input type="text" id="statusText" name="status" placeholder="What's your status?" style="width: 70%;">
        <button type="submit">Set Status</button>
      </form>
      <div class="response" id="response"></div>
    </div>
  </div>

  <script src="/dist/app.js"></script>
</body>

</html>
