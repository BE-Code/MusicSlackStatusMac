<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Set Slack Status</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div id="main-container" class="container">
    <!-- Loader -->
    <div id="loader">
      <p>Loading configuration...</p>
    </div>

    <!-- App Setup Instructions -->
    <div id="setup-container" class="hidden">
      <h1>Initial Setup</h1>
      <h2 id="setup-step-title">Let's configure your Slack App credentials.</h2>

      <div id="wizard-container">
        <!-- Step 1: Create App -->
        <div id="step-1" class="setup-step">
          <p>Open the <a href="https://api.slack.com/apps" target="_blank">Slack App creation page</a> and select <strong>"Create an App"</strong>, then choose <strong>"From scratch"</strong>.</p>
          <div class="navigation-buttons">
            <button class="next-step">Next &rarr;</button>
          </div>
        </div>

        <!-- Step 2: Name App -->
        <div id="step-2" class="setup-step hidden">
          <p>Type <code>Music Slack Status Mac</code> for the App Name and choose your workspace. The App Credentials will appear on this page after you create the app.</p>
          <div class="navigation-buttons">
            <button class="prev-step">&larr; Previous</button>
            <button class="next-step">Next &rarr;</button>
          </div>
        </div>

        <!-- Step 3: Credentials Form -->
        <div id="step-3" class="setup-step hidden">
          <p>On the "Basic Information" page for your app, find the <strong>App Credentials</strong> section and copy them into the fields below.</p>
          <form id="setupForm">
            <div class="form-group">
              <label for="appId">App ID</label>
              <input type="text" id="appId" name="appId" required>
            </div>
            <div class="form-group">
              <label for="clientId">Client ID</label>
              <input type="text" id="clientId" name="clientId" required>
            </div>
            <div class="form-group">
              <label for="clientSecret">Client Secret</label>
              <input type="password" id="clientSecret" name="clientSecret" required>
            </div>
            <div id="setup-response" class="response"></div>
            <div class="navigation-buttons">
              <button type="button" class="prev-step">&larr; Previous</button>
              <button type="submit">Save and Continue &rarr;</button>
            </div>
          </form>
        </div>

        <!-- Step 4: Redirect URL -->
        <div id="step-4" class="setup-step hidden">
          <p>Now, let's configure the permissions. In the left sidebar, go to <a href="#" class="oauth-dynamic-link" target="_blank"><strong>OAuth & Permissions</strong></a>. Under <strong>Redirect URLs</strong>, add this exact URL: <code>https://localhost:5001/oauth/redirect</code>. Then click <strong>Save URLs</strong>.</p>
          <div class="navigation-buttons">
            <button class="prev-step">&larr; Previous</button>
            <button class="next-step">Next &rarr;</button>
          </div>
        </div>

        <!-- Step 5: Scopes -->
        <div id="step-5" class="setup-step hidden">
          <p>Still on the <a href="#" class="oauth-dynamic-link" target="_blank"><strong>OAuth & Permissions</strong></a> page, scroll down to the <strong>"Scopes"</strong> section. Under <strong>"User Token Scopes"</strong>, click <strong>"Add an OAuth Scope"</strong> and add <code>users.profile:write</code>.</p>
          <p>You're done with the Slack website! You can close it now. Click next to connect your account.</p>
          <div class="navigation-buttons">
            <button class="prev-step">&larr; Previous</button>
            <button class="next-step">Next &rarr;</button>
          </div>
        </div>

        <!-- Step 6: Authentication -->
        <div id="step-6" class="setup-step hidden">
            <h1>Connect to Slack</h1>
            <h2>Your credentials are saved. Now, connect your account.</h2>
            <a href="#" id="slack-auth-button" class="button button-slack">Add to Slack</a>
            <div class="navigation-buttons">
                <button class="prev-step">&larr; Previous</button>
            </div>
        </div>
      </div>
    </div>

    <!-- Authentication Step - This will be removed -->
    <!-- <div id="auth-container" class="container-sm hidden">
      <h1>Connect to Slack</h1>
      <h2>Your credentials are saved. Now, connect your account.</h2>
      <a href="#" id="slack-auth-button" class="button button-slack">Add to Slack</a>
    </div> -->

    <!-- Main Status Setter -->
    <div id="status-container" class="container-sm hidden">
      <h1>Set Your Slack Status</h1>
      <h2>Enter a status and it will appear in Slack.</h2>
      <form id="statusForm">
        <input type="text" id="statusText" name="status" placeholder="What's your status?" style="width: 70%;">
        <button type="submit">Set Status</button>
      </form>
      <div class="response" id="response"></div>
    </div>
  </div>

  <script src="/dist/app.js"></script>
</body>

</html>
